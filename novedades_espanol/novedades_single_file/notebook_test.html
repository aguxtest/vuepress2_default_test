<!DOCTYPE html>
<html lang="ES">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.61">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Visualization | ML</title><meta name="description" content="Vue-powered Static Site Generator">
    <link rel="preload" href="/tallerml_vp2/assets/style-cfce4f9e.css" as="style"><link rel="stylesheet" href="/tallerml_vp2/assets/style-cfce4f9e.css">
    <link rel="modulepreload" href="/tallerml_vp2/assets/app-810d3a59.js"><link rel="modulepreload" href="/tallerml_vp2/assets/framework-24a298fe.js"><link rel="modulepreload" href="/tallerml_vp2/assets/notebook_test.html-62a58827.js"><link rel="modulepreload" href="/tallerml_vp2/assets/notebook_test.html-933155fd.js"><link rel="prefetch" href="/tallerml_vp2/assets/home_custom.html-025c69c7.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/index.html-5ca74dfb.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/novedades.html-1b82288f.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/novedad1.html-f6b4d0b6.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/novedad2.html-e1fb0304.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/404.html-94ceb362.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/home_custom.html-8f419e2b.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/index.html-69656d79.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/novedades.html-09e18222.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/novedad1.html-c9136ebb.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/novedad2.html-183f6f1f.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/404.html-b590028f.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/Posts-2c86d44c.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/PostsFm-6bdea5dd.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/test-420fcbba.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/HomeCustom-f7956c9e.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/HomeHeroCustom-e03855a9.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/HomeCustom-f7956c9e.js" as="script"><link rel="prefetch" href="/tallerml_vp2/assets/HomeHeroCustom-e03855a9.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="Barra lateral" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/tallerml_vp2/novedades_espanol/novedades_single_file/index.md" class=""><img class="logo" src="/tallerml_vp2/images/icono_erlen_neural.svg" alt="ML"><span class="site-name can-hide">ML</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/tallerml_vp2/index.md" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tallerml_vp2/novedades_espanol/novedades.md" class="" aria-label="Novedades"><!--[--><!--]--> Novedades <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tallerml_vp2/index.md/#¿quienes-somos" class="" aria-label="¿Quiénes somos?"><!--[--><!--]--> ¿Quiénes somos? <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tallerml_vp2/index.md/#auspiciantes" class="" aria-label="Auspiciantes"><!--[--><!--]--> Auspiciantes <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tallerml_vp2/novedades_espanol/novedades.md" class="" aria-label="Contacto"><!--[--><!--]--> Contacto <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Idioma</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Idioma</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/tallerml_vp2/novedades_espanol/novedades_single_file/notebook_test.html" class="router-link-active router-link-exact-active router-link-active" aria-label="ES"><!--[--><!--]--> ES <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tallerml_vp2/zh/" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/ML4chemArg/Intro-to-Machine-Learning-in-Chemistry" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="Cambiar entre oscuro/claro"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/tallerml_vp2/index.md" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tallerml_vp2/novedades_espanol/novedades.md" class="" aria-label="Novedades"><!--[--><!--]--> Novedades <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tallerml_vp2/index.md/#¿quienes-somos" class="" aria-label="¿Quiénes somos?"><!--[--><!--]--> ¿Quiénes somos? <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tallerml_vp2/index.md/#auspiciantes" class="" aria-label="Auspiciantes"><!--[--><!--]--> Auspiciantes <!--[--><!--]--></a></div><div class="navbar-item"><a href="/tallerml_vp2/novedades_espanol/novedades.md" class="" aria-label="Contacto"><!--[--><!--]--> Contacto <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Idioma</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Idioma</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/tallerml_vp2/novedades_espanol/novedades_single_file/notebook_test.html" class="router-link-active router-link-exact-active router-link-active" aria-label="ES"><!--[--><!--]--> ES <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tallerml_vp2/zh/" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/ML4chemArg/Intro-to-Machine-Learning-in-Chemistry" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">05/01/1980 - Nanopartículas de titanio <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/tallerml_vp2/novedades_espanol/novedades_single_file/novedad1.md" class="sidebar-item" aria-label="Noticia 1"><!--[--><!--]--> Noticia 1 <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">04/01/1980 Congreso de machine learning <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/tallerml_vp2/novedades_espanol/novedades_single_file/novedad2.md" class="sidebar-item" aria-label="Noticia 2"><!--[--><!--]--> Noticia 2 <!--[--><!--]--></a><!----></li><li><a class="external-link sidebar-item" href="https://github.com" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><!-- #region id="fnfYqArdo7Oq" --><p>#NOTEBOOK 3: Exploratory data analysis In this notebook we will focus on exploratory data analysis, this means, analyzing data with multiple variables and finding possible correlations between them. First, we will use the visual methods that we presented on Notebook 2, such as histograms, boxplots, and violin plots, but for all of the variables in our wine dataset. Then, we will take an approach to finding a correlation between them using a heatmap. Lastly, we will present different algorithms used for variable reduction.</p><!-- #endregion --><!-- #region id="YaXQIxrhpI89" --><h2 id="table-of-contents" tabindex="-1"><a class="header-anchor" href="#table-of-contents" aria-hidden="true">#</a> Table of Contents</h2><hr><!-- #endregion --><!-- #region id="ecZE6lgLiQGD" --><h1 id="visualization" tabindex="-1"><a class="header-anchor" href="#visualization" aria-hidden="true">#</a> Visualization</h1><hr><p>Exploratory data analysis is an approach to analyzing data sets to summarize their main characteristics, often with visual methods. We will cover some basic techniques to undestand how the data behaves and this could help us to decide for example what methods employ.</p><p>First, as always, we have to import the data set.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

df<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">&quot;https://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/winequality-red.csv&quot;</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="Qlkqkyku465A" --><p>##Histogram We can make boxplots for every variable, this kind of plots allows us to look for outliers.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;rainbow&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><!-- #region id="NdFFF6Zv3OfN" --><p>As you can see, the values ​​of the variables are on different scales. To better visualize it we apply logarithmic scale.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df<span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;rainbow&quot;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xscale<span class="token punctuation">(</span><span class="token string">&#39;symlog&#39;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>axis<span class="token punctuation">(</span>xmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> xmax<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="EUNlLYEuBCtn" --><p>It is possible to compare the data is scale the dataset. A common method is standardize variables by removing the mean and scaling to unit variance. Scikit-learn has a module for preprocessing and we will use it in the next example. For more information, please visit the <a href="https://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.StandardScaler.html" title="Standard Scaler" target="_blank" rel="noopener noreferrer">documentation<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler
scaled <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>df<span class="token punctuation">)</span>
df_scaled <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token operator">=</span>scaled<span class="token punctuation">,</span> columns<span class="token operator">=</span>df<span class="token punctuation">.</span>columns<span class="token punctuation">)</span>
ax <span class="token operator">=</span> sns<span class="token punctuation">.</span>boxplot<span class="token punctuation">(</span>data<span class="token operator">=</span>df_scaled<span class="token punctuation">,</span> orient<span class="token operator">=</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;rainbow&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="2tBmTzxh4DGF" --><p>Another way to visualize the boxplots is in matrix form. In this case, we use a function of the Pandas library called plot().</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>df<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>kind<span class="token operator">=</span><span class="token string">&#39;box&#39;</span><span class="token punctuation">,</span>subplots<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>layout<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>tight_layout<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="mkTuSn5MlgET" --><p>#Violin plot Violin plots can be used to vizualize both the distribution of the data and the posible outliers in the same figure.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span>violinplot<span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token string">&#39;quality&#39;</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token string">&#39;alcohol&#39;</span><span class="token punctuation">,</span> data <span class="token operator">=</span> df<span class="token punctuation">,</span> palette<span class="token operator">=</span><span class="token string">&quot;rainbow&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><!-- #region id="nKKjp5gSB2yb" --><h2 id="correlation-analysis" tabindex="-1"><a class="header-anchor" href="#correlation-analysis" aria-hidden="true">#</a> #Correlation analysis</h2><!-- #endregion --><!-- #region id="zlnysPgGnKXf" --><p>Another important aspect to understand our data is to study the correlation between the variables. If we want to see the correlation between pH and fixed acidity, we can make this scatter plot and marginal histograms using <em>sns.jonplot</em></p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>joint_plt <span class="token operator">=</span> sns<span class="token punctuation">.</span>jointplot<span class="token punctuation">(</span>y<span class="token operator">=</span><span class="token string">&#39;pH&#39;</span><span class="token punctuation">,</span> x<span class="token operator">=</span><span class="token string">&#39;fixed acidity&#39;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>df<span class="token punctuation">,</span> kind<span class="token operator">=</span><span class="token string">&#39;reg&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><!-- #region id="hqn5Tqnq5fH5" --><p>At first glance, as the slope is not very steep, it can be inferred that the relation is not exactly linear and the correlation is low. So we can calculate the correlation between two variables with <em>Pearson correlation coefficient</em> and the <em>p-value</em>.</p><p>The <em>Pearson correlation coefficient</em> allows us to easily observe linear dependencies between two data sets. A value of +1 means total positive linear correlation, 0 means no linear correlation, and −1, total negative linear correlation. Positive correlations imply that as x increases, so does y. Negative correlations imply that as x increases y decreases.</p><p>The <em>p-value</em> roughly indicates the probability that uncorrelated datasets have a <em>Pearson correlation coefficient</em> at least as extreme as the determined for these datasets. If this probability is lower than the 5% (P&lt;0.05), the correlation coefficient is statistically significant.</p><p><strong>Be careful as correlation does not imply causation. When two variables are correlated, there may or may not be a causative connection, and this connection may moreover be indirect.</strong></p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> scipy<span class="token punctuation">.</span>stats <span class="token keyword">import</span> pearsonr
<span class="token keyword">def</span> <span class="token function">get_corr</span><span class="token punctuation">(</span>col1<span class="token punctuation">,</span> col2<span class="token punctuation">,</span> temp_df<span class="token punctuation">)</span><span class="token punctuation">:</span>
    pearson_corr<span class="token punctuation">,</span> p_value <span class="token operator">=</span> pearsonr<span class="token punctuation">(</span>temp_df<span class="token punctuation">[</span>col1<span class="token punctuation">]</span><span class="token punctuation">,</span> temp_df<span class="token punctuation">[</span>col2<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Correlation between {} and {} is {:. 3f}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>col1<span class="token punctuation">,</span> col2<span class="token punctuation">,</span> pearson_corr<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;P-value of this correlation is {:. 3f}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>p_value<span class="token punctuation">)</span><span class="token punctuation">)</span>
get_corr<span class="token punctuation">(</span><span class="token string">&#39;fixed acidity&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;pH&#39;</span><span class="token punctuation">,</span> df<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="O2gBJkk_Z1bC" --><p>For example, it makes sense that the fixed acidity has a negative correlation with the pH ( $\rho$ = -0.68 ), and we verified this by doing a scatterplot. Although it&#39;s not completely linear, as we would expect from our chemistry knowledge.</p><!-- #endregion --><!-- #region id="kw2jkn8-V_5O" --><p>We can create a DataFrame with this parameter for each pair of columns (using the <em>df.corr()</em> function) and then, using matplot and seaborn, create a <em>heatmap</em> of the coefficients.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>correlation <span class="token operator">=</span> df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">&#39;pearson&#39;</span><span class="token punctuation">)</span>
fig<span class="token operator">=</span>plt<span class="token punctuation">.</span>gcf<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>set_size_inches<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>correlation<span class="token punctuation">,</span> annot<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>square<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="HTJ7k0tXQDZ9" --><p>When several variables are compared at the same time is difficult to grasp how the data behaves. So we could add to the heatmap the values of each comparison and plot only below the diagonal.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
correlation <span class="token operator">=</span> df<span class="token punctuation">.</span>corr<span class="token punctuation">(</span><span class="token punctuation">)</span>
mask_triu <span class="token operator">=</span> np<span class="token punctuation">.</span>triu<span class="token punctuation">(</span>correlation<span class="token punctuation">)</span>
fig<span class="token operator">=</span>plt<span class="token punctuation">.</span>gcf<span class="token punctuation">(</span><span class="token punctuation">)</span>
fig<span class="token punctuation">.</span>set_size_inches<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>heatmap<span class="token punctuation">(</span>data<span class="token operator">=</span>correlation<span class="token punctuation">,</span>mask<span class="token operator">=</span>mask_triu<span class="token punctuation">,</span>square<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>annot<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="RQsi7A_gp5c4" --><p>Another way to visualize the correlation between the variables is to plot a correlation matrix with the <em>pairplot</em> seaborn function. For example, here we plot the correlation of four columns of the dataset.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>sns<span class="token punctuation">.</span>pairplot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;fixed acidity&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;volatile acidity&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;citric acid&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;pH&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corner<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment">#corner=True hides the upper portion of the matrix</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><!-- #region id="GpjL2HO3pRuA" --><h2 id="variable-reduction" tabindex="-1"><a class="header-anchor" href="#variable-reduction" aria-hidden="true">#</a> #Variable reduction</h2><p>A very useful way to visualize data with multiple variables are the <em>variable reduction techniques</em>. Which reduce the multiple dimensions of the problem to just two or three, in order to make a plot that allows us to visualize the overall distribution of the variables.</p><!-- #endregion --><!-- #region id="JtKwKvSc0acN" --><p>We will concatenate the datasets of red and white wine for the Purposes of Visualization.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>df<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">&quot;https://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/winequality-red.csv&quot;</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&#39;red&#39;</span>
df2<span class="token operator">=</span>pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">&quot;https://archive.ics.uci.edu/ml/machine-learning-databases/wine-quality/winequality-white.csv&quot;</span><span class="token punctuation">,</span> delimiter<span class="token operator">=</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span>
df2<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&#39;yellow&#39;</span>


df_wine <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>df<span class="token punctuation">,</span> df2<span class="token punctuation">]</span><span class="token punctuation">,</span> ignore_index<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="Siaa2h0_qkIX" --><p>##PCA (Principal components analysis) Applying PCA to a large set of data with multiple variables is describing a set of data in terms of NEW unrelated variables (components). The components are arranged according to their original variance, that&#39;s why this technique is useful for reducing the dimensions of a dataset.</p><p>After loading the dataset and importing pandas and matplotlib, the next thing we do is import the <strong>PCA function from sklearn</strong>, then we create the PCA object. Using <strong>fit_transform()</strong> we can scale the data and learn the scaling parameters of that data.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>decomposition <span class="token keyword">import</span> PCA
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>preprocessing <span class="token keyword">import</span> StandardScaler


data_pca <span class="token operator">=</span> df_wine<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
data_pca <span class="token operator">=</span> data_pca<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;quality&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
data_pca <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data_pca<span class="token punctuation">)</span>
pca <span class="token operator">=</span> PCA<span class="token punctuation">(</span>n_components<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
pca_results <span class="token operator">=</span> pca<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data_pca<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="gtdelpSIycxt" --><p>Now we use matplotlib to make the PCA graph.</p><p>On a PCA graph, we should be able to see coorelated samples clustered together.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>pca_dataset <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data <span class="token operator">=</span> pca_results<span class="token punctuation">,</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;component1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;component2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;component3&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span>df_wine<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Component 1&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Component 2&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;2 Component PCA&#39;</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>scatterplot<span class="token punctuation">(</span>x <span class="token operator">=</span> pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;component1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;component2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> hue<span class="token operator">=</span>pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span>palette<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="BVVRC_6_GIZu" --><p>###t-distributed stochastic neighbor embedding (t-SNE)</p><p>t-distributed stochastic neighbor embedding (t-SNE) is a machine learning algorithm for visualization based on Stochastic Neighbor Embedding. It models each high-dimensional object by a two- or three-dimensional point in such a way that similar objects are modeled by nearby points and dissimilar objects are modeled by distant points with high probability.</p><p>We can make this variable reduction with the <em>scikit learn</em> module and we can plot it with <em>matplotlib</em>. First, we make a copy of the dataset and we work with it. Then, we drop the column of <em>quality</em> of this copy, we won&#39;t use it to make the t-SNE, but we&#39;ll take it into account for the plot.</p><p>To make the variable reduction we have to create a TSNE object and then use the <em>fit_transform</em> function on it with our dataset copy.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>manifold <span class="token keyword">import</span> TSNE

data_tsne <span class="token operator">=</span> df_wine<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
data_tsne <span class="token operator">=</span> data_tsne<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;quality&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
data_tsne <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data_tsne<span class="token punctuation">)</span>
tsne <span class="token operator">=</span> TSNE<span class="token punctuation">(</span>n_components<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> verbose<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> perplexity<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">,</span> n_iter<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>
tsne_results <span class="token operator">=</span> tsne<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data_tsne<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="ZZlLcPkDJ1Dm" --><p>Finally,with the results of the t-SNE we can create a DataFrame, add the <em>quality</em> column and plot it with matplotlib (the parameter <em>c</em> corresponds with the color of the dots, it has a similar function as the <em>hue</em> from seaborn).</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>tsne_dataset <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data <span class="token operator">=</span> tsne_results<span class="token punctuation">,</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;component1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;component2&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
tsne_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span>df_wine<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Component 1&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Component 2&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;2 Component TSNE&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>scatterplot<span class="token punctuation">(</span>x <span class="token operator">=</span> tsne_dataset<span class="token punctuation">[</span><span class="token string">&#39;component1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> tsne_dataset<span class="token punctuation">[</span><span class="token string">&#39;component2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> hue<span class="token operator">=</span>tsne_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span>palette<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="qc8kPHYkToQB" --><p>Estuve mirando la pag https://umap-learn.readthedocs.io/en/latest/basic_usage.html para hacer el UMAP</p><!-- #endregion --><!-- #region id="r7pF9EmQ-XYt" --><p>##UMAP Umap is yet another learning and dimension-reduction algorithm,</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> umap

data_umap <span class="token operator">=</span> df_wine<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
data_umap <span class="token operator">=</span> data_umap<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;quality&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
scaled_data_umap <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data_umap<span class="token punctuation">)</span> <span class="token comment">#We convert each feature into z-scores (number of standard deviations from the mean) for comparability.</span>
umap <span class="token operator">=</span> umap<span class="token punctuation">.</span>UMAP<span class="token punctuation">(</span><span class="token punctuation">)</span>
umap_results <span class="token operator">=</span> umap<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>scaled_data_umap<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>umap_dataset <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data <span class="token operator">=</span> umap_results<span class="token punctuation">,</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;component1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;component2&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
umap_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span>df_wine<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&#39;Component 1&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&#39;Component 2&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;2 Component UMAP&#39;</span><span class="token punctuation">)</span>
sns<span class="token punctuation">.</span>scatterplot<span class="token punctuation">(</span>x <span class="token operator">=</span> umap_dataset<span class="token punctuation">[</span><span class="token string">&#39;component1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y <span class="token operator">=</span> umap_dataset<span class="token punctuation">[</span><span class="token string">&#39;component2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> hue <span class="token operator">=</span> umap_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span>palette<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="Y05AL1kIhcr7" --><p>##Advanced plots</p><!-- #endregion --><!-- #region id="o4Zvqucjjr7E" --><p>We&#39;ll use df_new as our dataset from now on. We can also creat interactive plots with Python. In this example we calculate a four components PCA, which can be ploted in a series of 2D plots. We create an interactive plot that allows the user to change which component plot in the vertical axis and which in the horizontal axis. We can see that most of the plots separate the red from the yellow wines.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> ipywidgets <span class="token keyword">as</span> widgets
<span class="token keyword">from</span> IPython<span class="token punctuation">.</span>display <span class="token keyword">import</span> display

data_pca <span class="token operator">=</span> df_wine<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
data_pca <span class="token operator">=</span> data_pca<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>labels <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;quality&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>axis <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
data_pca <span class="token operator">=</span> StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data_pca<span class="token punctuation">)</span>
pca <span class="token operator">=</span> PCA<span class="token punctuation">(</span>n_components<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
pca_results <span class="token operator">=</span> pca<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>data_pca<span class="token punctuation">)</span>
columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;principal component 1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;principal component 2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;principal component 3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;principal component 4&#39;</span><span class="token punctuation">]</span>
pca_dataset <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data <span class="token operator">=</span> pca_results<span class="token punctuation">,</span> columns <span class="token operator">=</span> columns <span class="token punctuation">)</span>
pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token operator">=</span>df_wine<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span>

Xaxes <span class="token operator">=</span>widgets<span class="token punctuation">.</span>Dropdown<span class="token punctuation">(</span>options<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;principal component 1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;principal component 2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;principal component 3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;principal component 4&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>disabled<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
Yaxes <span class="token operator">=</span>widgets<span class="token punctuation">.</span>Dropdown<span class="token punctuation">(</span>options<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;principal component 1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;principal component 2&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;principal component 3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;principal component 4&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>disabled<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">PCvis</span><span class="token punctuation">(</span>PC_X<span class="token punctuation">,</span> PC_Y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    ax <span class="token operator">=</span> fig<span class="token punctuation">.</span>add_subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> 
    ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span>PC_X<span class="token punctuation">,</span> fontsize <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span>PC_Y<span class="token punctuation">,</span> fontsize <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span><span class="token string">&#39;2 Component PCA&#39;</span><span class="token punctuation">,</span> fontsize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span>
    targets <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;red&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;yellow&#39;</span><span class="token punctuation">]</span>
    colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;r&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;y&#39;</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> target<span class="token punctuation">,</span> color <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>targets<span class="token punctuation">,</span>colors<span class="token punctuation">)</span><span class="token punctuation">:</span>
        indicesToKeep <span class="token operator">=</span> pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span> <span class="token operator">==</span> target
        ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>pca_dataset<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>indicesToKeep<span class="token punctuation">,</span> PC_X<span class="token punctuation">]</span>
               <span class="token punctuation">,</span> pca_dataset<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>indicesToKeep<span class="token punctuation">,</span> PC_Y<span class="token punctuation">]</span>
               <span class="token punctuation">,</span> c <span class="token operator">=</span> color
               <span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>legend<span class="token punctuation">(</span>targets<span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span>

widgets<span class="token punctuation">.</span>interact<span class="token punctuation">(</span>PCvis<span class="token punctuation">,</span>PC_X<span class="token operator">=</span>Xaxes<span class="token punctuation">,</span>PC_Y<span class="token operator">=</span>Yaxes<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!-- #region id="W-hXhtjx4VuJ" --><p>Another advanced plot we can make is a 3D plot, in which we can see the relation beetween three diferent variables at the same time. In this case, we plot three PCA components.</p><!-- #endregion --><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> mpl_toolkits<span class="token punctuation">.</span>mplot3d <span class="token keyword">import</span> Axes3D

fig <span class="token operator">=</span> plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ax <span class="token operator">=</span> Axes3D<span class="token punctuation">(</span>fig<span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">&#39;Component 1&#39;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">&#39;Component 2&#39;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>set_zlabel<span class="token punctuation">(</span><span class="token string">&#39;Component 3&#39;</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">&#39;3 Component PCA&#39;</span><span class="token punctuation">)</span>
ax<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;principal component 1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;principal component 2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
           pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;principal component 3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> c <span class="token operator">=</span> pca_dataset<span class="token punctuation">[</span><span class="token string">&#39;wine&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--[--><div class="my-footer">This is my custom page footer</div><!--]--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/tallerml_vp2/assets/app-810d3a59.js" defer></script>
  </body>
</html>
